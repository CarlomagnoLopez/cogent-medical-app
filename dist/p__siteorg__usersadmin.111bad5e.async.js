(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"lsb+":function(e,t,a){"use strict";a.r(t);var r=a("rePB"),n=(a("T2oS"),a("W9HT")),o=(a("IzEo"),a("bx4M")),l=(a("g9YV"),a("wCAj")),s=(a("DYRE"),a("zeV3")),i=(a("+L6B"),a("2/Rp")),c=(a("5NDa"),a("5rEg")),u=(a("miYZ"),a("tsqr")),p=a("1OyB"),m=a("vuIU"),d=a("JX7q"),g=a("Ji7U"),h=a("LK+K"),f=(a("2qtc"),a("kLXV")),v=a("q1tI"),y=a.n(v),b=a("wx14"),E=(a("DZo9"),a("8z0m")),C=(a("OaEy"),a("2fM7")),S=(a("O3gP"),a("lrIw")),O=(a("y8nQ"),a("Vl3Y")),k=(a("2HEe"),a("vDqi"),O["a"].Item,i["default"].Group,S["a"].Option,C["a"].Option),I=(E["a"].Dragger,""),U=function(e){Object(g["a"])(a,e);var t=Object(h["a"])(a);function a(e){var r;return Object(p["a"])(this,a),r=t.call(this,e),r.onFinish=function(e){e.phoneNumber="+"+e.prefix+e.phoneNumber,console.log("Received values of form: ",JSON.stringify(e)),r.props.createUser(e)},r.handleSearch=function(e){r.setState({loadingcompanies:!0}),e||r.setState({data:[]})},r.onRoleChange=function(e){},r.handleChange=function(e){r.setState({value:e})},r.prefixSelector=y.a.createElement(O["a"].Item,{name:"prefix",noStyle:!0},y.a.createElement(C["a"],{style:{width:70}},y.a.createElement(k,{value:"1"},"+1"),y.a.createElement(k,{value:"86"},"+86"),y.a.createElement(k,{value:"87"},"+87"),y.a.createElement(k,{value:"91"},"+91"),y.a.createElement(k,{value:"55"},"+55"),y.a.createElement(k,{value:"52"},"+52"))),r.state={data:[],value:"hi",loadingcompanies:!1},console.log("Constructor Calling"),r}return Object(m["a"])(a,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){console.log("Componenet Will Receive Props")}},{key:"render",value:function(){var e=this,t={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}},a=C["a"].Option;console.log(this.props.data),"orgadmin"===localStorage.getItem("currentAuth")&&(I=this.props.data.filter((function(e){return e["mcp-1-pk"]===localStorage.getItem("orgid")})),console.log("Org Name . "+JSON.stringify(I)));var r=void 0!=this.props.data?this.props.data.map((function(e){return y.a.createElement(a,{key:null!=e.orgname?e.text:"",value:e["mcp-1-pk"]},e.orgname)})):"",n={labelCol:{span:8},wrapperCol:{span:16}};return y.a.createElement(f["a"],{closable:!0,visible:this.props.visible,title:"Create User",cancelText:"Cancel",footer:null,destroyOnClose:!0,onCancel:this.props.onCancel},y.a.createElement(O["a"],Object(b["a"])({},n,{ref:function(t){return e.formRef=t},onFinish:this.onFinish,validateMessages:t,initialValues:{prefix:"91"}}),y.a.createElement(O["a"].Item,{label:"CompanyName",name:"orgid",hasFeedback:this.state.loadingcompanies,rules:[{required:!0}]},y.a.createElement(C["a"],{required:!0,showSearch:!0,value:this.state.value,placeholder:"companyName",style:{width:"100%"},defaultActiveFirstOption:!1,showArrow:!1,filterOption:function(e,t){return t.value.toLowerCase().indexOf(e.toLowerCase())>=0},onSearch:this.handleSearch,onChange:this.handleChange,notFoundContent:null},"siteadmin"===localStorage.getItem("currentAuth")?r:y.a.createElement(a,{key:void 0!=I[0]?I[0].text:"",value:void 0!=I[0]?I[0]["mcp-1-pk"]:""},void 0!=I[0]?I[0].orgname:""))),y.a.createElement("p",null),y.a.createElement(O["a"].Item,{name:"role",label:"Role",rules:[{required:!0}]},y.a.createElement(C["a"],{placeholder:"Select a role",onChange:this.onRoleChange,allowClear:!0},y.a.createElement(a,{value:"User"},"User"),y.a.createElement(a,{value:"OrgAdmin"},"OrgAdmin"),y.a.createElement(a,{value:"OrgApproval"},"OrgApprover"))),y.a.createElement(O["a"].Item,{label:"Contact Name",name:"name",rules:[{required:!0}]},y.a.createElement(c["a"],{placeholder:"Contact Name",id:"error"})),y.a.createElement(O["a"].Item,{label:"Contact Email",name:"email",rules:[{required:!0,type:"email"}]},y.a.createElement(c["a"],{placeholder:"Contact Email",id:"error"})),y.a.createElement(O["a"].Item,{label:"Contact Number",name:"phoneNumber",rules:[{required:!0}]},y.a.createElement(c["a"],{addonBefore:this.prefixSelector,placeholder:"Contact Number"})),y.a.createElement(O["a"].Item,{wrapperCol:{span:16,offset:20}},y.a.createElement(i["default"],{type:"primary",htmlType:"submit"},"Submit"))))}}]),a}(v["Component"]),w=U,A=(O["a"].Item,i["default"].Group,S["a"].Option,C["a"].Option),x=(E["a"].Dragger,function(e){Object(g["a"])(a,e);var t=Object(h["a"])(a);function a(e){var r;return Object(p["a"])(this,a),r=t.call(this,e),r.onFinish=function(e){console.log("Received values of form: ",e),e.userName=r.props.current["mcp-1-sk"],r.props.updateUser(e)},r.prefixSelector=y.a.createElement(O["a"].Item,{name:"prefix",noStyle:!0},y.a.createElement(C["a"],{style:{width:70}},y.a.createElement(A,{value:"86"},"+86"),y.a.createElement(A,{value:"87"},"+87"),y.a.createElement(A,{value:"91"},"+91"),y.a.createElement(A,{value:"55"},"+55"),y.a.createElement(A,{value:"1"},"+1"),y.a.createElement(A,{value:"52"},"+52"))),r.handleSearch=function(e){console.log("Value "+e),r.setState({loadingcompanies:!0}),e||r.setState({data:[]})},r.onRoleChange=function(e){},r.handleChange=function(e){console.log("Handle Change "+e),r.setState({value:e})},r.state={current:"",value:""},r}return Object(m["a"])(a,[{key:"render",value:function(){console.log("Value . "+this.state.value);var e={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}},t=C["a"].Option,a=void 0!=this.props.data?this.props.data.map((function(e){return y.a.createElement(t,{key:null!=e.orgname?e.text:"",value:e["mcp-1-pk"]},e.orgname)})):"",r=this.props.current;return console.log("Current User "+JSON.stringify(r)),y.a.createElement(f["a"],{closable:!0,visible:this.props.visible,title:"Edit User",footer:null,destroyOnClose:!0,onCancel:this.props.onCancel},y.a.createElement(O["a"],{labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:16}},onFinish:this.onFinish,validateMessages:e,initialValues:{prefix:"91",orgid:this.props.current.orgid,role:this.props.current.role,name:this.props.current.name,email:this.props.current.email,phoneNumber:this.props.current.phoneNumber}},y.a.createElement(O["a"].Item,{label:"CompanyName",name:"orgid",hasFeedback:this.state.loadingcompanies,rules:[{required:!0}]},y.a.createElement(C["a"],{disabled:!0,required:!0,showSearch:!0,value:this.state.value,placeholder:"companyName",style:{width:"100%"},defaultActiveFirstOption:!1,showArrow:!1,filterOption:function(e,t){return t.value.toLowerCase().indexOf(e.toLowerCase())>=0},onSearch:this.handleSearch,onChange:this.handleChange,notFoundContent:null},a)),y.a.createElement(O["a"].Item,{name:"role",label:"Role",rules:[{required:!0}]},y.a.createElement(C["a"],{placeholder:"Select a role",onChange:this.onRoleChange,allowClear:!0},y.a.createElement(t,{value:"User"},"User"),y.a.createElement(t,{value:"OrgAdmin"},"OrgAdmin"),y.a.createElement(t,{value:"OrgApprover"},"OrgApprover"))),y.a.createElement(O["a"].Item,{label:"Contact Name",name:"name",rules:[{required:!0}]},y.a.createElement(c["a"],{placeholder:"Contact Name",id:"error"})),y.a.createElement(O["a"].Item,{label:"Contact Email",name:"email",rules:[{required:!0,type:"email"}]},y.a.createElement(c["a"],{placeholder:"Contact Email",id:"error"})),y.a.createElement(O["a"].Item,{label:"Contact Number",name:"phoneNumber",rules:[{required:!0}]},y.a.createElement(c["a"],{addonBefore:this.prefixSelector,placeholder:"Contact Number"})),y.a.createElement(O["a"].Item,{wrapperCol:{span:12,offset:6}},y.a.createElement(i["default"],{type:"primary",htmlType:"submit"},"Submit"))))}}]),a}(v["Component"])),N=x,z=a("9kvl"),q=a("WG1l"),R=a.n(q),j=a("l+S1"),D=a("G3dp"),F=a("/MfK"),T=f["a"].confirm,$=function(e){Object(g["a"])(a,e);var t=Object(h["a"])(a);function a(e){var r;return Object(p["a"])(this,a),r=t.call(this,e),r.deleteUser=function(e){var t=localStorage.getItem("userName"),a=e["mcp-1-sk"].substring(5,e["mcp-1-sk"].length);if(t!==a){var n=Object(d["a"])(r);T({title:"Confirm",content:"Are you sure to delete this user?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){console.log("OK"),n.props.dispatch({type:"organization/deleteUser",payload:{userid:e["mcp-1-sk"].substring(5,e["mcp-1-sk"].length),orgid:e["mcp-1-pk"],role:e.role}})},onCancel:function(){console.log("Cancel")}})}else u["a"].error("Can not delete this user!")},r.onCancel=function(){r.setState({formvalues:[],type:"",visible:!1,visibleedituser:!1})},r.onOk=function(){r.setState({visible:!1})},r.editUser=function(e){console.log("Candiate "+JSON.stringify(e)),r.setState({formvalues:e,typeofuser:"edit",visibleedituser:!0,currentcandidate:e})},r.sendLogin=function(e){},r.updateUser=function(e){r.props.dispatch({type:"organization/updateUserDetails",payload:e}),r.setState({visibleedituser:!1,current:""})},r.createUser=function(e){console.log("Create Data "+JSON.stringify(e));var t=r.state.data,a=t;r.props.dispatch({type:"organization/generateOrgUser",payload:e,role:e.role}),r.setState({data:a,visible:!1,updatedata:!0})},r.getColumnSearchProps=function(e){return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,o=t.confirm,l=t.clearFilters;return y.a.createElement("div",{style:{padding:8}},y.a.createElement(c["a"],{ref:function(e){r.searchInput=e},icon:y.a.createElement(j["a"],null),placeholder:"Search ".concat(e),value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r.handleSearch(n,o,e)},style:{width:188,marginBottom:8,display:"block"}}),y.a.createElement(s["a"],null,y.a.createElement(i["default"],{type:"primary",onClick:function(){return r.handleSearch(n,o,e)},icon:y.a.createElement(j["a"],null),size:"small",style:{width:90}},"Search"),y.a.createElement(i["default"],{onClick:function(){return r.handleReset(l)},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return y.a.createElement(j["a"],{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return r.searchInput.select()}))},render:function(t){return r.state.searchedColumn===e?y.a.createElement(R.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[r.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},r.handleSearch=function(e,t,a){t(),r.setState({searchText:e[0],searchedColumn:a})},r.handleReset=function(e){e(),r.setState({searchText:""})},r.deleteSiteAdmin=function(){var e=r.props.userslist,t=[];e.map((function(e){"SiteAdmin"!==e.role&&t.push(e)})),console.log(t),r.setState({userslist:t})},r.state={visible:!1,loading:!1,visibleedituser:!1,currentcandidate:[],updatedata:!1,typeofuser:"create",formvalues:[],searchText:"",searchedColumn:"",loadedUsers:!1},r}return Object(m["a"])(a,[{key:"componentWillReceiveProps",value:function(){console.log("Component will componentWillReceiveProps")}},{key:"componentDidMount",value:function(){console.log("Component componentWillReceiveProps mount")}},{key:"componentWillMount",value:function(){console.log("Component will mount"),"orgadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getUsersByOrgs",payload:{orgid:localStorage.getItem("orgid"),role:localStorage.getItem("currentAuth")}}),"siteadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getAllUser",payload:[]}),this.props.dispatch({type:"organization/getAllOrgs",payload:[]})}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.statusorgadmincreation,r=t.deleteuserstatus,s=t.updateuserstatus;0==s.success&&(u["a"].error(s.log.message),this.props.dispatch({type:"organization/resetUpdateUserDetailsStatus",payload:[]})),1==s.success&&(u["a"].success("User information updated!"),this.props.dispatch({type:"organization/resetUpdateUserDetailsStatus",payload:[]}),"orgadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getUsersByOrgs",payload:{orgid:localStorage.getItem("orgid"),role:localStorage.getItem("currentAuth")}}),"siteadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getAllUser",payload:[]})),r&&(1==r.success&&(u["a"].success("User Deleted Successfully!"),"orgadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getUsersByOrgs",payload:{orgid:localStorage.getItem("orgid"),role:localStorage.getItem("currentAuth")}}),"siteadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getAllUser",payload:[]})),0==r.success&&(u["a"].error(r.log.message),this.props.dispatch({type:"organization/resetDeleteUserStatus",payload:[]}))),a&&(1==a.success&&(u["a"].success("User Created Successfully!"),"orgadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getUsersByOrgs",payload:{orgid:localStorage.getItem("orgid"),role:localStorage.getItem("currentAuth")}}),"siteadmin"===localStorage.getItem("currentAuth")&&this.props.dispatch({type:"organization/getAllUser",payload:[]})),0==a.success&&(u["a"].error(a.log.message),this.props.dispatch({type:"organization/resetStatus",payload:[]})));var c=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return y.a.createElement("span",null,void 0!=e?e:"")}},{title:"Role",dataIndex:"role",key:"role",render:function(e){switch(e){case"2":return"Site Admin";case"3":return"Approver";case"5":return"Org Admin";case"6":return"User";default:return e}}},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",key:"action",render:function(t){return y.a.createElement("div",{style:{textAlign:"left"}},y.a.createElement("a",{onClick:function(){return e.editUser(t)}},y.a.createElement(D["a"],null)," Edit"),y.a.createElement("p",null),y.a.createElement("a",{onClick:function(){return e.deleteUser(t)}},y.a.createElement(F["a"],null)," Delete"),y.a.createElement("p",null))}}],p=this.state,m=(p.currentcandidate,p.loadedUsers),d=this.props,g=(d.orgadmins,d.userslist);return g&&!m&&this.setState({loadedUsers:!0},(function(t,a){console.log("org"),e.deleteSiteAdmin()})),console.log("Orgs list "+this.props.orgslist),y.a.createElement(n["default"],{spinning:this.props.loading,message:"loading please wait"},y.a.createElement(o["a"],{title:"Manage Organization Users",extra:y.a.createElement(i["default"],{onClick:function(){e.setState({typeofuser:"create",visible:!0})}},"Create User")},y.a.createElement(l["a"],{columns:c,dataSource:this.props.userslist}),y.a.createElement(w,{visible:this.state.visible,onCancel:this.onCancel,onOk:this.onOk,createUser:this.createUser,data:this.props.orgslist}),y.a.createElement(N,{visible:this.state.visibleedituser,onCancel:this.onCancel,onOk:this.onOk,updateUser:this.updateUser,data:this.props.orgslist,current:this.state.currentcandidate})))}}]),a}(v["Component"]);t["default"]=Object(z["u"])((function(e){var t,a=e.organization,n=e.loading;return t={organization:a,statusorgadmincreation:a.statusorgadmincreation,orgslist:a.orgslist,userslist:a.userslist,loading:n.models.organization,deleteuserstatus:a.deleteuserstatus},Object(r["a"])(t,"statusorgadmincreation",a.statusorgadmincreation),Object(r["a"])(t,"updateuserstatus",a.updateuserstatus),Object(r["a"])(t,"orgsusers",a.orgsusers),t}))($)}}]);